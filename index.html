<!DOCTYPE html>
<html>
  <head>
    <title>Heatmap basado en fechas con Google Charts</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', { packages: ['calendar'] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        fetch('data.csv')
          .then(response => response.text())
          .then(csvText => {
            const dataTable = new google.visualization.DataTable();
            dataTable.addColumn({ type: 'date', id: 'Date' });
            dataTable.addColumn({ type: 'number', id: 'Value' });

            const rows = csvText.split('\n').slice(1);
            const data = rows.map(row => {
              const [dateStr, value] = row.split(',');
              const dateParts = dateStr.split('-');
              const date = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);
              return [date, parseInt(value)];
            });
            dataTable.addRows(data);

            const chart = new google.visualization.Calendar(document.getElementById('calendar_basic'));

            const options = {
              title: "Heatmap basado en fechas",
              height: 350,
              colorAxis: {
                colors: ['#EEEEEE', '#CCCCCC', '#00FFFF'],
                values: [0, 1, 2]
              }
            };

            chart.draw(dataTable, options);
          });
      }
    </script>
  </head>
  <body>
    <div id="calendar_basic" style="width: 1000px; height: 350px;"></div>
  </body>
</html>